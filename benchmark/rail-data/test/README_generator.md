# é«˜é“æ’ç­é—®é¢˜æ•°æ®ç”Ÿæˆå™¨

è¿™ä¸ªæ•°æ®ç”Ÿæˆå™¨å¯ä»¥ä¸ºé«˜é“æ’ç­ä¼˜åŒ–é—®é¢˜ç”Ÿæˆä¸åŒè§„æ¨¡çš„æµ‹è¯•æ•°æ®ï¼Œç”Ÿæˆçš„æ•°æ®å®Œå…¨å…¼å®¹ç°æœ‰çš„æ±‚è§£ä»£ç  `test.py`ã€‚

## åŠŸèƒ½ç‰¹ç‚¹

- ğŸš„ **å®Œå…¨å…¼å®¹**: ç”Ÿæˆçš„æ•°æ®æ ¼å¼ä¸åŸå§‹ `data.xlsx` å®Œå…¨ä¸€è‡´
- ğŸ“Š **å¤šç§è§„æ¨¡**: æ”¯æŒå°ã€ä¸­ã€å¤§è§„æ¨¡é—®é¢˜å®ä¾‹ç”Ÿæˆ
- âš™ï¸ **å‚æ•°å¯æ§**: é€šè¿‡è¶…å‚æ•°æ§åˆ¶é—®é¢˜çš„å„ä¸ªæ–¹é¢
- ğŸ¯ **éšæœºç§å­**: æ”¯æŒå¯é‡ç°çš„éšæœºæ•°æ®ç”Ÿæˆ
- âœ… **è‡ªåŠ¨éªŒè¯**: å†…ç½®å…¼å®¹æ€§æµ‹è¯•ç¡®ä¿æ•°æ®è´¨é‡

## æ•°æ®ç»“æ„

ç”Ÿæˆçš„Excelæ–‡ä»¶åŒ…å«4ä¸ªå·¥ä½œè¡¨ï¼š

### 1. station (è½¦ç«™ä¿¡æ¯)
- `station`: è½¦ç«™åç§° (A, B, C, ...)
- `mile`: è·èµ·ç‚¹çš„ç´¯ç§¯é‡Œç¨‹

### 2. train (åˆ—è½¦ä¿¡æ¯)  
- `trainNO`: åˆ—è½¦è½¦æ¬¡ (G1, G3, G5, ...)
- `speed`: é€Ÿåº¦ç­‰çº§ ('300', '350', ...)
- å„è½¦ç«™åˆ—: åœç«™æ ‡è¯† (1=åœç«™, 0=é€šè¿‡)

### 3. runtime (åŒºé—´è¿è¡Œæ—¶é—´)
- `station`: åŒºé—´åç§° ('A-B', 'B-C', ...)
- é€Ÿåº¦ç­‰çº§åˆ—: å¯¹åº”é€Ÿåº¦ä¸‹çš„è¿è¡Œæ—¶é—´

### 4. parameter (ç³»ç»Ÿå‚æ•°)
- `T`: æ—¶é—´ä¸Šé™
- `H`: æœ€å°é—´éš”æ—¶é—´  
- `MINSTOP`: æœ€å°åœç«™æ—¶é—´
- `MAXSTOP`: æœ€å¤§åœç«™æ—¶é—´

## ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬ç”¨æ³•

```python
from rail_data_generator import RailDataGenerator

# åˆ›å»ºç”Ÿæˆå™¨
generator = RailDataGenerator(
    num_stations=7,      # è½¦ç«™æ•°é‡
    num_trains=5,        # åˆ—è½¦æ•°é‡
    speed_classes=['300', '350'],  # é€Ÿåº¦ç­‰çº§
    max_distance=300,    # çº¿è·¯æ€»é•¿åº¦(km)
    time_limit=160,      # æ—¶é—´ä¸Šé™(åˆ†é’Ÿ)
    min_headway=5,       # æœ€å°é—´éš”æ—¶é—´(åˆ†é’Ÿ)
    min_stop_time=2,     # æœ€å°åœç«™æ—¶é—´(åˆ†é’Ÿ)
    max_stop_time=15,    # æœ€å¤§åœç«™æ—¶é—´(åˆ†é’Ÿ)
    stop_probability=0.3, # ä¸­é—´ç«™åœç«™æ¦‚ç‡
    random_seed=42       # éšæœºç§å­
)

# ç”Ÿæˆæ•°æ®
data = generator.generate_data('my_data.xlsx')

# æŸ¥çœ‹æ•°æ®æ‘˜è¦
generator.print_data_summary(data)
```

### é¢„å®šä¹‰è§„æ¨¡

```python
from rail_data_generator import create_small_instance, create_medium_instance, create_large_instance

# å°è§„æ¨¡å®ä¾‹ (5ç«™3è½¦)
small_data = create_small_instance()

# ä¸­ç­‰è§„æ¨¡å®ä¾‹ (8ç«™6è½¦)  
medium_data = create_medium_instance()

# å¤§è§„æ¨¡å®ä¾‹ (12ç«™10è½¦)
large_data = create_large_instance()
```

## è¶…å‚æ•°è¯´æ˜

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `num_stations` | int | 7 | è½¦ç«™æ•°é‡(åŒ…æ‹¬èµ·ç»ˆç‚¹ï¼Œæœ€å°‘3ä¸ª) |
| `num_trains` | int | 5 | åˆ—è½¦æ•°é‡ |
| `speed_classes` | List[str] | ['300', '350'] | é€Ÿåº¦ç­‰çº§åˆ—è¡¨ |
| `max_distance` | int | 300 | çº¿è·¯æ€»é•¿åº¦(å…¬é‡Œ) |
| `time_limit` | int | 160 | è°ƒåº¦æ—¶é—´ä¸Šé™(åˆ†é’Ÿ) |
| `min_headway` | int | 5 | åˆ—è½¦æœ€å°é—´éš”æ—¶é—´(åˆ†é’Ÿ) |
| `min_stop_time` | int | 2 | ä¸­é—´ç«™æœ€å°åœç«™æ—¶é—´(åˆ†é’Ÿ) |
| `max_stop_time` | int | 15 | ä¸­é—´ç«™æœ€å¤§åœç«™æ—¶é—´(åˆ†é’Ÿ) |
| `stop_probability` | float | 0.3 | ä¸­é—´ç«™åœç«™æ¦‚ç‡(0-1) |
| `random_seed` | int | None | éšæœºç§å­(å¯é€‰) |

## ç”Ÿæˆè§„åˆ™

### è½¦ç«™ç”Ÿæˆ
- è½¦ç«™åç§°: A, B, C, ... (è¶…è¿‡26ä¸ªåˆ™ç”¨S1, S2, ...)
- é‡Œç¨‹åˆ†å¸ƒ: åœ¨[0, max_distance]èŒƒå›´å†…éšæœºç”Ÿæˆï¼Œç¡®ä¿å•è°ƒé€’å¢
- èµ·ç‚¹é‡Œç¨‹å›ºå®šä¸º0ï¼Œç»ˆç‚¹é‡Œç¨‹å›ºå®šä¸ºmax_distance

### åˆ—è½¦ç”Ÿæˆ  
- è½¦æ¬¡å‘½å: G1, G3, G5, ... (å¥‡æ•°ç¼–å·)
- é€Ÿåº¦ç­‰çº§: ä»speed_classesä¸­éšæœºé€‰æ‹©
- åœç«™æ¨¡å¼: èµ·ç»ˆç‚¹å¿…åœï¼Œä¸­é—´ç«™æŒ‰stop_probabilityæ¦‚ç‡åœç«™

### è¿è¡Œæ—¶é—´ç”Ÿæˆ
- åŸºç¡€æ—¶é—´: æ¯ä¸ªåŒºé—´éšæœºç”Ÿæˆ6-20åˆ†é’Ÿçš„åŸºç¡€è¿è¡Œæ—¶é—´
- é€Ÿåº¦è°ƒæ•´: é«˜é€Ÿåº¦ç­‰çº§è¿è¡Œæ—¶é—´æ›´çŸ­ (time = base_time Ã— 300/speed)
- æœ€å°æ—¶é—´: ç¡®ä¿è¿è¡Œæ—¶é—´è‡³å°‘ä¸º1åˆ†é’Ÿ

## å…¼å®¹æ€§æµ‹è¯•

è¿è¡Œå…¼å®¹æ€§æµ‹è¯•ç¡®ä¿ç”Ÿæˆçš„æ•°æ®èƒ½è¢«åŸå§‹æ±‚è§£ä»£ç æ­£ç¡®å¤„ç†ï¼š

```bash
python test_generated_data.py
```

æµ‹è¯•å†…å®¹åŒ…æ‹¬ï¼š
- âœ… æ•°æ®æ ¼å¼éªŒè¯
- âœ… çº¦æŸæ„å»ºæµ‹è¯•  
- âœ… æ¨¡å‹æ±‚è§£æµ‹è¯•
- âœ… ç»“æœè¾“å‡ºéªŒè¯

## ç¤ºä¾‹è¾“å‡º

```
=== æ•°æ®æ‘˜è¦ ===

1. è½¦ç«™ä¿¡æ¯ (5 ä¸ªè½¦ç«™):
station  mile
      A     0
      B    74
      C   119
      D   146
      E   200

2. åˆ—è½¦ä¿¡æ¯ (3 åˆ—åˆ—è½¦):
trainNO speed  A  B  C  D  E
     G1   300  1  1  1  1  1
     G3   300  1  0  0  1  1
     G5   350  1  1  1  1  1

3. åŒºé—´è¿è¡Œæ—¶é—´ (4 ä¸ªåŒºé—´):
station  300  350
    A-B   15   12
    B-C    6    5
    C-D   14   12
    D-E    9    7

4. ç³»ç»Ÿå‚æ•°:
   T: 120
   H: 5
   MINSTOP: 2
   MAXSTOP: 15
```

## æ–‡ä»¶ç»“æ„

```
rail-data/test/
â”œâ”€â”€ rail_data_generator.py      # ä¸»ç”Ÿæˆå™¨ä»£ç 
â”œâ”€â”€ test_generated_data.py      # å…¼å®¹æ€§æµ‹è¯•
â”œâ”€â”€ README_generator.md         # ä½¿ç”¨è¯´æ˜
â””â”€â”€ test.py                     # åŸå§‹æ±‚è§£ä»£ç 
```

## æ³¨æ„äº‹é¡¹

1. **Excelæ ¼å¼**: ç”Ÿæˆçš„æ–‡ä»¶ä¸ºæ ‡å‡†Excelæ ¼å¼(.xlsx)ï¼Œç¡®ä¿å®‰è£…äº†openpyxlåŒ…
2. **å‚æ•°å·¥ä½œè¡¨**: parameterå·¥ä½œè¡¨é‡‡ç”¨è½¬ç½®æ ¼å¼(ç¬¬ä¸€è¡Œå‚æ•°åï¼Œç¬¬äºŒè¡Œå‚æ•°å€¼)
3. **é€Ÿåº¦ç­‰çº§**: é€Ÿåº¦ç­‰çº§å¿…é¡»ä¸ºå­—ç¬¦ä¸²æ ¼å¼('300', '350')ï¼Œä¸æ˜¯æ•°å€¼
4. **åœç«™çº¦æŸ**: èµ·ç‚¹å’Œç»ˆç‚¹å¿…é¡»åœç«™ï¼Œä¸­é—´ç«™æ ¹æ®æ¦‚ç‡å†³å®š
5. **æ—¶é—´åˆç†æ€§**: ç”Ÿæˆå™¨ä¼šç¡®ä¿è¿è¡Œæ—¶é—´å’Œåœç«™æ—¶é—´çš„åˆç†æ€§

## æ‰©å±•å»ºè®®

å¯ä»¥æ ¹æ®éœ€è¦æ‰©å±•ç”Ÿæˆå™¨åŠŸèƒ½ï¼š
- æ·»åŠ æ›´å¤æ‚çš„åœç«™æ¨¡å¼
- æ”¯æŒä¸åŒç±»å‹çš„åˆ—è½¦(å®¢è¿/è´§è¿)
- å¼•å…¥å­£èŠ‚æ€§æˆ–æ—¶æ®µæ€§å˜åŒ–
- æ·»åŠ è®¾å¤‡ç»´æŠ¤æ—¶é—´çª—å£
- æ”¯æŒå¤šçº¿è·¯ç½‘ç»œæ‹“æ‰‘

